<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ERC-20 Token Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">

  <div class="container text-center mt-5">
    <h1 class="mb-4">ğŸš€ ERC-20 Token Dashboard</h1>

    <button class="btn btn-primary mb-3" onclick="connect()">ğŸ”Œ Connect Wallet</button>
    <p id="account" class="text-info"></p>

    <button class="btn btn-success mb-3" onclick="getBalance()">ğŸ’° Check Balance</button>
    <p id="balance" class="text-warning"></p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.4/dist/ethers.min.js"></script>
  <script>
    let provider, signer, contract;
    const tokenAddress = "0xc33f43143258d563384e171362581ed6a7b141ce";
    const abiUrl = "abi.json";

    async function connect() {
      if (typeof window.ethereum === 'undefined') {
        alert("ğŸ¦Š MetaMask not detected. Please install MetaMask.");
        return;
      }

      try {
        // Ask for wallet connection
        await window.ethereum.request({ method: 'eth_requestAccounts' });

        // Set provider and signer
        provider = new ethers.BrowserProvider(window.ethereum);
        signer = await provider.getSigner();

        const account = await signer.getAddress();
        document.getElementById("account").innerText = "âœ… Connected: " + account;

        // Load ABI and initialize contract
        const response = await fetch(abiUrl);
        const abi = await response.json();
        contract = new ethers.Contract(tokenAddress, abi, signer);
      } catch (error) {
        console.error("Connection Error:", error);
        alert("âŒ Failed to connect wallet. Check console.");
      }
    }

    async function getBalance() {
      if (!contract || !signer) {
        alert("â— Connect wallet first.");
        return;
      }

      try {
        const account = await signer.getAddress();
        const balance = await contract.balanceOf(account);
        const decimals = await contract.decimals();
        const adjusted = balance / (10 ** decimals);
        document.getElementById("balance").innerText = "ğŸ’° Your Balance: " + adjusted;
      } catch (error) {
        console.error("Balance Error:", error);
        alert("âŒ Failed to fetch balance.");
      }
    }
  </script>
</body>
</html>

