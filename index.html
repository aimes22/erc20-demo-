<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ERC-20 Token Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light text-center">

  <div class="container mt-5">
    <h1 class="mb-4">🚀 ERC-20 Token Dashboard</h1>

    <button class="btn btn-primary mb-3" onclick="connect()">🔌 Connect Wallet</button>
    <p id="account" class="text-info"></p>

    <button class="btn btn-success mb-3" onclick="getBalance()">💰 Check Balance</button>
    <p id="balance" class="text-warning"></p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.4/dist/ethers.min.js"></script>
  <script>
    let provider, signer, contract;

    const tokenAddress = "0xc33f43143258d563384e171362581ed6a7b141ce"; // Your ERC-20 token
    const abiUrl = "abi.json"; // Make sure this abi.json is in same folder

    async function connect() {
      if (window.ethereum) {
        try {
          provider = new ethers.BrowserProvider(window.ethereum);
          await window.ethereum.request({ method: "eth_requestAccounts" });
          signer = await provider.getSigner();
          const account = await signer.getAddress();
          document.getElementById("account").innerText = "✅ Connected: " + account;

          const response = await fetch(abiUrl);
          const abi = await response.json();
          contract = new ethers.Contract(tokenAddress, abi, signer);
        } catch (err) {
          console.error(err);
          alert("❌ Failed to connect wallet");
        }
      } else {
        alert("🦊 MetaMask not detected. Please install MetaMask.");
      }
    }

    async function getBalance() {
      if (!contract) return alert("❗ Connect your wallet first.");
      const account = await signer.getAddress();
      const balance = await contract.balanceOf(account);
      const decimals = await contract.decimals();
      const adjusted = balance / (10 ** decimals);
      document.getElementById("balance").innerText = "Your Balance: " + adjusted;
    }
  </script>
</body>
</html>

